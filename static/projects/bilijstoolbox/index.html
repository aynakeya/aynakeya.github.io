<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
    <meta charset="UTF-8" content="biliToolBox">
    <title>b站书签工具箱</title>
</head>
<body>

<h1>本页面由Aynakeya粗制滥造而成</h1>

<h3>提供pilipili书签js脚本，内容如下</h3>

<h3>食用方法1：电脑浏览器比如chrome直接拖到书签栏就完事了</h3>

<h3>食用方法2：电脑浏览器不能拖的，先点右键你要的脚本,复制链接,然后添加书签（收藏），把名称换一下，然后到书签管理里面，把该书签的链接改为你复制的内容</h3>

<h3>食用方法3：同3，手机复制链接，然后添加书签（收藏）把地址改为复制的内容，把名称换一下，然后到书签管理里面，把该书签的链接改为你复制的内容</h3>

<h3>看不懂的自己百度，谢谢合作</h3>

<div id="slist"></div>

<h3>主要是给自己用的，更不更新看心情</h3>

<script type="application/javascript">
    function selectinput(a) {
        return function () {
            a.select();
        }
    }
    var videoDownload = 'javascript:(function(){var b=prompt("视频下载,选择清晰度:120,116,112,80,74,64,48,32,16",116);var a="";var c="";if(typeof(window.__INITIAL_STATE__.bvid)!="undefined"){a=window.__INITIAL_STATE__.bvid;c=/cid=[0-9]+/.exec($("#link2").val())[0].substring(4)}else{a=window.__INITIAL_STATE__.epInfo.bvid;c=window.__INITIAL_STATE__.epInfo.cid}$.ajaxSetup({crossDomain:true,xhrFields:{withCredentials:true}});$.get("https://api.bilibili.com/x/player/playurl?bvid="+a+"&cid="+c+"&qn="+b+"&type=&otype=json&fourk=1",function(g,e){var d=document.createElementNS("http://www.w3.org/1999/xhtml","a");d.href=g.data.durl[0]["url"].replace("http","https");var f=document.createEvent("MouseEvents");f.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);d.dispatchEvent(f);alert("待下载开始后,刷新页面来播放视频")})})();';
    var videoCover = 'javascript:(function(){var a;if(typeof(window.__INITIAL_STATE__.videoData)!="undefined"){a=window.__INITIAL_STATE__.videoData.pic}else{a=window.__INITIAL_STATE__.mediaInfo.cover}window.open(a)})();';
    var musicDownload = 'javascript:(function(){var a=prompt("音频下载,选择清晰度:0,1,2",2);var b=/au[0-9]+/.exec(window.location.pathname)[0].substring(2);$.ajaxSetup({crossDomain:true,xhrFields:{withCredentials:true}});$.get("https://www.bilibili.com/audio/music-service-c/web/url?mid=8047632&privilege=2&quality="+a+"&sid="+b,function(f,d){var c=document.createElementNS("http://www.w3.org/1999/xhtml","a");console.log(f);c.href=f.data["cdns"][0];console.log(c.href);var e=document.createEvent("MouseEvents");e.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);c.dispatchEvent(e);alert("下载已开始")})})();';
    var bvav = 'javascript:(function(){if(typeof(window.__INITIAL_STATE__.bvid)!="undefined"){var b="";if(location.href.indexOf("av")!==-1){b=window.__INITIAL_STATE__.bvid}else{b="av"+window.__INITIAL_STATE__.aid}try{location.href="/"+b}catch(a){alert(b)}}else{alert("av"+window.__INITIAL_STATE__.epInfo.aid+"---"+window.__INITIAL_STATE__.epInfo.bvid)}})();';
    var scriptlist = {
        "vd": videoDownload,
        "vc": videoCover,
        "md": musicDownload,
        "ba": bvav
    };
    var scriptName = {
        "vd": "b站视频下载",
        "vc": "b站封面提取",
        "md": "b站音频下载",
        "ba": "ba av 互转"
    };
    window.onload = function () {
        var slistdiv = document.getElementById("slist");
        for (var key in scriptlist) {
            var link = document.createElement("a");
            link.id = key;
            link.href = scriptlist[key];
            link.innerText = scriptName[key];
            link.style = "font-size:66px";
            slistdiv.appendChild(link);
            slistdiv.appendChild(document.createElement("br"));
            var input = document.createElement("input");
            input.value = scriptlist[key];
            input.readOnly = true;
            input.onclick = selectinput(input);
            input.style = "font-size:50px";
            slistdiv.appendChild(input);
            var hre = document.createElement("hr");
            hre.style = "height:30px; visibility:hidden; margin-bottom:-1px;";
            slistdiv.appendChild(hre);
        }
    }
</script>

</body>
</html>